<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Vendas - Tech Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Navy Blue / Dark Mode -->
    <!-- Application Structure Plan: A single-page dashboard layout. Top section for key performance indicators (KPIs). A main grid for three interactive charts (Category, Vendedor, Region). Interactive filters (dropdowns for Category and Vendedor) at the top to dynamically update all visual elements and KPIs. This structure is chosen because it's a standard, intuitive pattern for data analysis, allowing users to move from a high-level overview to detailed, filtered views seamlessly on one screen, which is superior to the tab-switching model of the original spreadsheet. -->
    <!-- Visualization & Content Choices: The application will transform the static report elements into a dynamic dashboard. KPIs (Total Vendas, etc.) will be presented in stat cards that update with filters. For visualizations, a Donut chart (Chart.js) will show category share, a Bar chart (Chart.js) will compare vendor sales, and a Horizontal Bar chart (Chart.js) will show regional sales, replacing the non-portable map chart. The core interaction will be dropdown filters for 'Category' and 'Vendedor' that dynamically update all KPIs and charts, providing a cohesive analytical experience. This design is chosen to turn the static tutorial output into a genuinely interactive and exploratory tool. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 320px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .kpi-card {
            background-color: #1e1e1e;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.2), 0 2px 4px -2px rgb(0 0 0 / 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
        }
    </style>
</head>
<body class="text-gray-200 bg-gray-900">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white">Dashboard de Vendas</h1>
            <p class="text-gray-400 mt-1">Análise de performance da Tech Store.</p>
        </header>

        <main>
            <!-- Filters Section -->
            <div class="mb-8 p-6 bg-gray-800 rounded-xl shadow-sm">
                 <p class="text-lg font-semibold text-gray-50 mb-4">Filtros Interativos</p>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="categoryFilter" class="block text-sm font-medium text-gray-400 mb-1">Filtrar por Categoria</label>
                        <select id="categoryFilter" class="w-full p-2 border border-gray-600 bg-gray-700 text-gray-200 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="all">Todas as Categorias</option>
                        </select>
                    </div>
                    <div>
                        <label for="sellerFilter" class="block text-sm font-medium text-gray-400 mb-1">Filtrar por Vendedor</label>
                        <select id="sellerFilter" class="w-full p-2 border border-gray-600 bg-gray-700 text-gray-200 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="all">Todos os Vendedores</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- KPIs Section -->
            <div class="mb-8">
                <p class="text-lg font-semibold text-gray-50 mb-4">Visão Geral</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div id="totalSales" class="kpi-card"></div>
                    <div id="avgTicket" class="kpi-card"></div>
                    <div id="topProduct" class="kpi-card"></div>
                    <div id="topCategory" class="kpi-card"></div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="lg:col-span-3 bg-gray-800 p-6 rounded-xl shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 text-white">Vendas por Vendedor</h3>
                    <div class="chart-container">
                        <canvas id="salesBySellerChart"></canvas>
                    </div>
                </div>
                <div class="lg:col-span-2 bg-gray-800 p-6 rounded-xl shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 text-white">Participação por Categoria</h3>
                    <div class="chart-container">
                        <canvas id="salesByCategoryChart"></canvas>
                    </div>
                </div>
                <div class="lg:col-span-5 bg-gray-800 p-6 rounded-xl shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 text-white">Vendas por Região</h3>
                     <div class="chart-container" style="height: 280px;">
                        <canvas id="salesByRegionChart"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const salesData = [
                { data: '2025-08-01', produto: 'Smartphone X', categoria: 'Smartphones', regiao: 'Sudeste', vendedor: 'Ana', valor: 2800.00 },
                { data: '2025-08-02', produto: 'Fone BT Pro', categoria: 'Acessórios', regiao: 'Sul', vendedor: 'Bruno', valor: 350.00 },
                { data: '2025-08-03', produto: 'Smartwatch 2', categoria: 'Wearables', regiao: 'Nordeste', vendedor: 'Carla', valor: 800.00 },
                { data: '2025-08-04', produto: 'Notebook Gamer', categoria: 'Notebooks', regiao: 'Centro-Oeste', vendedor: 'Ana', valor: 7500.00 },
                { data: '2025-08-05', produto: 'Mouse X1', categoria: 'Periféricos', regiao: 'Sudeste', vendedor: 'Bruno', valor: 250.00 },
                { data: '2025-08-06', produto: 'Smartphone X', categoria: 'Smartphones', regiao: 'Norte', vendedor: 'Davi', valor: 2800.00 },
                { data: '2025-08-07', produto: 'Teclado Mecânico', categoria: 'Periféricos', regiao: 'Sul', vendedor: 'Carla', valor: 600.00 },
                { data: '2025-08-08', produto: 'Smartwatch 2', categoria: 'Wearables', regiao: 'Sudeste', vendedor: 'Ana', valor: 800.00 },
                { data: '2025-08-09', produto: 'Fone BT Pro', categoria: 'Acessórios', regiao: 'Nordeste', vendedor: 'Davi', valor: 350.00 },
                { data: '2025-08-10', produto: 'Notebook Gamer', categoria: 'Notebooks', regiao: 'Sudeste', vendedor: 'Bruno', valor: 7500.00 },
                { data: '2025-08-11', produto: 'Smartphone X', categoria: 'Smartphones', regiao: 'Centro-Oeste', vendedor: 'Carla', valor: 2800.00 },
                { data: '2025-08-12', produto: 'Câmera Pro', categoria: 'Câmeras', regiao: 'Sul', vendedor: 'Ana', valor: 5200.00 },
                { data: '2025-08-13', produto: 'Mouse X1', categoria: 'Periféricos', regiao: 'Norte', vendedor: 'Bruno', valor: 250.00 },
                { data: '2025-08-14', produto: 'Smartwatch 2', categoria: 'Wearables', regiao: 'Nordeste', vendedor: 'Davi', valor: 800.00 },
                { data: '2025-08-15', produto: 'Fone BT Pro', categoria: 'Acessórios', regiao: 'Sudeste', vendedor: 'Carla', valor: 350.00 },
            ];

            const categoryFilter = document.getElementById('categoryFilter');
            const sellerFilter = document.getElementById('sellerFilter');
            
            let charts = {};

            function populateFilters() {
                const categories = [...new Set(salesData.map(item => item.categoria))];
                const sellers = [...new Set(salesData.map(item => item.vendedor))];

                categories.forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat;
                    option.textContent = cat;
                    categoryFilter.appendChild(option);
                });

                sellers.forEach(seller => {
                    const option = document.createElement('option');
                    option.value = seller;
                    option.textContent = seller;
                    sellerFilter.appendChild(option);
                });
            }

            function updateDashboard() {
                const selectedCategory = categoryFilter.value;
                const selectedSeller = sellerFilter.value;

                const filteredData = salesData.filter(item => {
                    const categoryMatch = selectedCategory === 'all' || item.categoria === selectedCategory;
                    const sellerMatch = selectedSeller === 'all' || item.vendedor === selectedSeller;
                    return categoryMatch && sellerMatch;
                });

                updateKPIs(filteredData);
                updateCharts(filteredData);
            }
            
            function formatCurrency(value) {
                return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
            }

            function updateKPIs(data) {
                const totalSales = data.reduce((sum, item) => sum + item.valor, 0);
                const avgTicket = data.length > 0 ? totalSales / data.length : 0;

                const productCounts = data.reduce((acc, item) => {
                    acc[item.produto] = (acc[item.produto] || 0) + 1;
                    return acc;
                }, {});
                const topProduct = Object.keys(productCounts).reduce((a, b) => productCounts[a] > productCounts[b] ? a : b, 'N/A');

                const categoryCounts = data.reduce((acc, item) => {
                    acc[item.categoria] = (acc[item.categoria] || 0) + 1;
                    return acc;
                }, {});
                const topCategory = Object.keys(categoryCounts).reduce((a, b) => categoryCounts[a] > categoryCounts[b] ? a : b, 'N/A');

                document.getElementById('totalSales').innerHTML = `
                    <p class="text-sm text-gray-400 mb-1">Total de Vendas</p>
                    <p class="text-3xl font-bold text-gray-50">${formatCurrency(totalSales)}</p>`;
                document.getElementById('avgTicket').innerHTML = `
                    <p class="text-sm text-gray-400 mb-1">Ticket Médio</p>
                    <p class="text-3xl font-bold text-gray-50">${formatCurrency(avgTicket)}</p>`;
                document.getElementById('topProduct').innerHTML = `
                    <p class="text-sm text-gray-400 mb-1">Produto Mais Vendido</p>
                    <p class="text-2xl font-bold text-gray-50 truncate">${data.length > 0 ? topProduct : 'N/A'}</p>`;
                document.getElementById('topCategory').innerHTML = `
                    <p class="text-sm text-gray-400 mb-1">Categoria Líder</p>
                    <p class="text-2xl font-bold text-gray-50 truncate">${data.length > 0 ? topCategory : 'N/A'}</p>`;
            }
            
            function updateCharts(data) {
                const chartColors = {
                    primary: 'rgba(59, 130, 246, 0.7)',
                    primaryHover: 'rgba(59, 130, 246, 1)',
                    backgrounds: [
                        'rgba(59, 130, 246, 0.8)', // Azul
                        'rgba(239, 68, 68, 0.8)',  // Vermelho
                        'rgba(16, 185, 129, 0.8)', // Verde
                        'rgba(249, 115, 22, 0.8)', // Laranja
                        'rgba(139, 92, 246, 0.8)', // Roxo
                        'rgba(236, 72, 153, 0.8)'  // Rosa
                    ],
                    backgroundsHover: [
                        'rgba(59, 130, 246, 1)',
                        'rgba(239, 68, 68, 1)',
                        'rgba(16, 185, 129, 1)',
                        'rgba(249, 115, 22, 1)',
                        'rgba(139, 92, 246, 1)',
                        'rgba(236, 72, 153, 1)'
                    ]
                };

                // Sales by Seller Chart
                const salesBySeller = data.reduce((acc, item) => {
                    acc[item.vendedor] = (acc[item.vendedor] || 0) + item.valor;
                    return acc;
                }, {});
                const sellerLabels = Object.keys(salesBySeller);
                const sellerData = Object.values(salesBySeller);
                renderChart('salesBySellerChart', 'bar', {
                    labels: sellerLabels,
                    datasets: [{
                        label: 'Total de Vendas',
                        data: sellerData,
                        backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 1,
                        borderRadius: 4,
                    }]
                }, { indexAxis: 'y', scales: { x: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)'}, ticks: { color: '#e0e0e0' }}, y: { grid: { color: 'rgba(255,255,255,0.1)'}, ticks: { color: '#e0e0e0' }} } });

                // Sales by Category Chart
                const salesByCategory = data.reduce((acc, item) => {
                    acc[item.categoria] = (acc[item.categoria] || 0) + item.valor;
                    return acc;
                }, {});
                const categoryLabels = Object.keys(salesByCategory);
                const categoryData = Object.values(salesByCategory);
                renderChart('salesByCategoryChart', 'doughnut', {
                    labels: categoryLabels,
                    datasets: [{
                        label: 'Vendas',
                        data: categoryData,
                        backgroundColor: chartColors.backgrounds,
                        hoverBackgroundColor: chartColors.backgroundsHover,
                        borderColor: '#1e1e1e',
                        borderWidth: 2,
                    }]
                }, { plugins: { legend: { position: 'bottom', labels: { color: '#e0e0e0' } } } });
                
                // Sales by Region Chart
                const salesByRegion = data.reduce((acc, item) => {
                    acc[item.regiao] = (acc[item.regiao] || 0) + item.valor;
                    return acc;
                }, {});
                const regionLabels = Object.keys(salesByRegion);
                const regionData = Object.values(salesByRegion);
                renderChart('salesByRegionChart', 'bar', {
                    labels: regionLabels,
                    datasets: [{
                        label: 'Vendas por Região',
                        data: regionData,
                        backgroundColor: chartColors.backgrounds,
                        borderColor: chartColors.backgroundsHover,
                        borderWidth: 1,
                        borderRadius: 4,
                    }]
                }, { scales: { y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)'}, ticks: { color: '#e0e0e0' }}, x: { grid: { color: 'rgba(255,255,255,0.1)'}, ticks: { color: '#e0e0e0' }} } });
            }

            function renderChart(canvasId, type, data, options) {
                const ctx = document.getElementById(canvasId).getContext('2d');
                if (charts[canvasId]) {
                    charts[canvasId].destroy();
                }
                charts[canvasId] = new Chart(ctx, {
                    type: type,
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        ...options,
                        plugins: {
                            ...options.plugins,
                            tooltip: {
                                backgroundColor: 'rgba(0,0,0,0.7)',
                                bodyColor: '#fff',
                                titleColor: '#fff',
                            }
                        }
                    }
                });
            }

            categoryFilter.addEventListener('change', updateDashboard);
            sellerFilter.addEventListener('change', updateDashboard);

            populateFilters();
            updateDashboard();
        });
    </script>
</body>
</html>
